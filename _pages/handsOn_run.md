---
title: "Clustering with pimba_run"
layout: archive
permalink: /handsOn_run/
---  

The output generated by pimba_prepare.sh is a fasta file that will be used by pimba_run.sh in the following command:

```console
./pimba_run.sh -i <input_reads> -o <output_dir> -w <approach> -s <otu_similarity> -a <assign_similarity> -c <coverage> -l <otu_length> -h <hits_per_subject> -g <marker_gene> -t <num_threads> -e <E-value> -d <databases.txt> -x <run_lulu>
```

`-i <input_reads>` = FASTA file with reads output generated by pimba_prepare.sh;\
`-o <output_dir>` = Directory where the results will be stored;\
`-w <approach>` = Analysis strategy to be used. It can be 'otu' or 'asv'. If 'otu', pimba uses vsearch. If 'asv', pimba uses swarm. Default: 'otu';\
`-s <otu_similarity>` = Percentage of similarity used in the otu clustering. The default is 0.97;\
`-a <assign_similarity>` = Percentage of similarity used in the taxonomy assignment. The default is 0.9;\
`-c <coverage>` = minimum coverage for the alignment. The default is 0.9;\
`-l <otu_length>` = Length to trim the reads. If 0, then no reads are trimmed;\
`-h <hits_per_subject>` = if 1, choose the best hit. If > 1, choose by majority. Default is 1;\
`-g <marker_gene>` = Marker gene and Database of the analysis. It can be: (16S-SILVA, 16S-GREENGENES, 16S-RDP, 16S-NCBI, ITS-FUNGI-NCBI, ITS-FUNGI-UNITE, ITS-PLANTS-NCBI, COI-NCBI). The path for each database must be configured in the <databases_file.txt>;\
`-t <num_threads>` = Number of threads to use in the blast step. Default is 1;\
`-e <E-value>` = Expected value used by Blast. The default is 0.00001;\
`-d <databases_file.txt>` = File with the path of the databases.\
`-x <lulu>` = if set as 'lulu', PIMBA will discard erroneous OTUs or ASVs with LULU. The default is not to use LULU.\
  
 The `databases_file.txt` must be properly configured. You can download it [here](https://1drv.ms/t/s!Aq5Vg7CO1tohhbwpAGRZue4HU6ObNw?e=Y29Rmj).

Here is an example of a command:

```console
./pimba_run.sh -i AllSamples.fasta -o AllSamplesCOI_98clust90assign -w otu -s 0.98 -a 0.9 -c 0.9 -l 130 -h 1 -g /path/to/your/database/ -t 24 -e 0.1 -d databases.txt
```
 
  
